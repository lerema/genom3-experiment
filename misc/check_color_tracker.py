import ast
import matplotlib.pyplot as plt

# PARSE_TEXT = """
# {'PlatesInfo': {'seq': [{'index': 0, 'num_blobs': 328, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -1.6554978259219608, 'y': -1.656473349148931, 'z': 0.4219071070595414}}, {'index': 1, 'num_blobs': 180, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.9995995891277447, 'y': 2.429255458952589, 'z': 0.988217215212859}}, {'index': 2, 'num_blobs': 413, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.839170178954347, 'y': 2.9875754402553643, 'z': 0.9850460919344893}}, {'index': 3, 'num_blobs': 37, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.666038032067915, 'y': 1.8622205598589519, 'z': 0.9862304590115453}}, {'index': 4, 'num_blobs': 169, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.0010522446935677, 'y': -2.0270278439297846, 'z': 0.986676928546655}}, {'index': 5, 'num_blobs': 111, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.001490499547809, 'y': -1.191275982083044, 'z': 0.9869638499875628}}, {'index': 6, 'num_blobs': 168, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.000152711053538, 'y': 2.474473090483902, 'z': 0.9862952828901316}}, {'index': 7, 'num_blobs': 115, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -1.9988833127167378, 'y': 3.3235788650330282, 'z': 0.9865357940460794}}, {'index': 8, 'num_blobs': 162, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -1.3780582942615687, 'y': -1.3724044401219797, 'z': 0.9892736063514517}}, {'index': 9, 'num_blobs': 381, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -1.1052591661637334, 'y': -1.9111621315473215, 'z': 0.9873696498759095}}, {'index': 10, 'num_blobs': 30, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -1.0049840748875911, 'y': -0.8365337715060694, 'z': 0.9870131394229007}}, {'index': 11, 'num_blobs': 91, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 0.9979853370554783, 'y': -3.4875734872817534, 'z': 0.9861316200708374}}, {'index': 12, 'num_blobs': 78, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.0000352596817002, 'y': -2.6155103662805654, 'z': 0.9863872988066478}}, {'index': 13, 'num_blobs': 180, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 0.9969115124134059, 'y': 3.2517681742435465, 'z': 0.9874518083405432}}, {'index': 14, 'num_blobs': 425, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.1181649036317252, 'y': 3.7196255052262908, 'z': 0.9863572295074088}}, {'index': 15, 'num_blobs': 26, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.2497735303845, 'y': 2.725269382388622, 'z': 0.9855650611596136}}, {'index': 16, 'num_blobs': 181, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.7573389806848474, 'y': -2.7941990753405634, 'z': 0.9874084457894148}}, {'index': 17, 'num_blobs': 485, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.952524770767365, 'y': -3.335421082911918, 'z': 0.9871957992501001}}, {'index': 18, 'num_blobs': 13, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.9998077993769665, 'y': -2.275573527650642, 'z': 0.9873769006354229}}, {'index': 19, 'num_blobs': 194, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.9986691844923317, 'y': 3.3079106336120625, 'z': 0.9858410165344967}}, {'index': 20, 'num_blobs': 119, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.998626185601416, 'y': 4.124299467052825, 'z': 0.9865327477144326}}, {'index': 21, 'num_blobs': 212, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 2.4274554060650333, 'y': 0.7551162229351687, 'z': 0.986906982142216}}, {'index': 22, 'num_blobs': 485, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 2.8330498035020675, 'y': 0.18098378839184925, 'z': 0.9872603999579939}}, {'index': 23, 'num_blobs': 284, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 3.368255568755576, 'y': 0.810876423545611, 'z': 0.9848999126613804}}, {'index': 24, 'num_blobs': 133, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 3.506558126318358, 'y': -0.06105173487946382, 'z': 0.9860319554113365}}], 'num_interesing_spots': 25}}
# """
# PARSE_TEXT = """
# {'PlatesInfo': {'seq': [{'index': 0, 'num_blobs': 307, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.7656842322668354, 'y': -2.767019877005726, 'z': 0.6056885036375954}}, {'index': 1, 'num_blobs': 82, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -3.240087366767412, 'y': -3.239697698373078, 'z': 0.683980736092328}}, {'index': 2, 'num_blobs': 162, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -3.294336603799062, 'y': -2.3045273261819164, 'z': 0.9884680725996775}}, {'index': 3, 'num_blobs': 403, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -3.0038350346912495, 'y': -2.9615159142228364, 'z': 0.9835423052009826}}, {'index': 4, 'num_blobs': 105, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.3066828141185685, 'y': -2.1605225168336357, 'z': 0.9881833753411544}}, {'index': 5, 'num_blobs': 115, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.2366650384279296, 'y': -2.9365141830658015, 'z': 0.987710519434267}}, {'index': 6, 'num_blobs': 136, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -1.9995620248484132, 'y': 0.9335011596232201, 'z': 0.9886842042416362}}, {'index': 7, 'num_blobs': 295, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -1.636373568360149, 'y': 1.5385332933835132, 'z': 0.9866802386960969}}, {'index': 8, 'num_blobs': 137, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -0.99755647221812, 'y': 0.8685224083816379, 'z': 0.9870870976270232}}, {'index': 9, 'num_blobs': 103, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -0.9899737722486637, 'y': 1.7738599138274935, 'z': 0.9873759267903393}}, {'index': 10, 'num_blobs': 119, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -0.00022547648547198624, 'y': -3.661358011672185, 'z': 0.9858120112494881}}, {'index': 11, 'num_blobs': 201, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 0.7856783960027429, 'y': -3.1360657346224716, 'z': 0.9869227008296497}}, {'index': 12, 'num_blobs': 288, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 0.9979877011952194, 'y': -3.7749346533501686, 'z': 0.9845298931997668}}, {'index': 13, 'num_blobs': 20, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.000190474357984, 'y': -2.6517082463685, 'z': 0.984838511212986}}, {'index': 14, 'num_blobs': 127, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.1559910834033875, 'y': 3.6962893419747047, 'z': 0.9863854108225776}}, {'index': 15, 'num_blobs': 86, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.2305610273764707, 'y': 2.9456700688254873, 'z': 0.9853901259267994}}, {'index': 16, 'num_blobs': 132, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.9992754470959433, 'y': -0.2699250173761347, 'z': 0.9874592782594362}}, {'index': 17, 'num_blobs': 93, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.9976807773739331, 'y': 0.586304913735681, 'z': 0.9836382925875737}}, {'index': 18, 'num_blobs': 130, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 2.0013026627941546, 'y': 3.226637861080956, 'z': 0.9875654893074746}}, {'index': 19, 'num_blobs': 321, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 2.1438098975590965, 'y': 3.7995706694843747, 'z': 0.9871875744571703}}, {'index': 20, 'num_blobs': 27, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 2.2498603678259936, 'y': 2.6877172859002094, 'z': 0.9872808078476303}}, {'index': 21, 'num_blobs': 135, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 2.4714309534428605, 'y': 0.2876394472595143, 'z': 0.9874515223525147}}, {'index': 22, 'num_blobs': 305, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 3.002204865120248, 'y': -0.24247955892997608, 'z': 0.9879081437296349}}, {'index': 23, 'num_blobs': 27, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 3.0012829232440623, 'y': 0.7804561631825737, 'z': 0.9865817642770218}}], 'num_interesing_spots': 24}}
# """
PARSE_TEXT = """
{'PlatesInfo': {'seq': [{'index': 43, 'num_blobs': 167, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.2298139255329628, 'y': -2.1057808056152094, 'z': -0.007407195450132742}}, {'index': 64, 'num_blobs': 156, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 3.4670588074820308, 'y': 1.0080597280370986, 'z': -0.04521239232309293}}, {'index': 57, 'num_blobs': 155, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 2.1009046789251866, 'y': 0.9635011622286924, 'z': -0.038096453040513456}}, {'index': 3, 'num_blobs': 141, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -3.0966974599758244, 'y': 2.620456859201862, 'z': -0.07176968933267935}}, {'index': 10, 'num_blobs': 130, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.428419662358457, 'y': 2.0087930239698015, 'z': -0.006108372324882871}}, {'index': 50, 'num_blobs': 128, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.8877753761538083, 'y': -1.838273888913837, 'z': -0.005183746037022541}}, {'index': 16, 'num_blobs': 128, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -2.357392744052225, 'y': -1.8152954972921576, 'z': -0.13575934382729027}}, {'index': 36, 'num_blobs': 127, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -0.8635808324543451, 'y': 3.4628456905024496, 'z': 0.0019053344364118319}}, {'index': 49, 'num_blobs': 125, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.8378226375792832, 'y': -2.753864904270665, 'z': -0.19676468377123024}}, {'index': 29, 'num_blobs': 121, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -1.2567058664575517, 'y': 3.3521855773732177, 'z': -0.08029067393999456}}, {'index': 23, 'num_blobs': 116, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -1.541868516299964, 'y': -0.9636587395358107, 'z': -0.007107362540452522}}, {'index': 65, 'num_blobs': 115, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 3.588266922243638, 'y': 2.0376090708245194, 'z': -0.19846884971355916}}, {'index': 22, 'num_blobs': 107, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': -1.4229245837878837, 'y': -1.7084954514369874, 'z': -0.1380514048751913}}, {'index': 56, 'num_blobs': 105, 'state': '::or::ColorTrack::INTERESTING', 'coord': {'x': 1.907019723049257, 'y': 1.997146152950763, 'z': -0.22899705565130513}}], 'num_interesing_spots': 14}}
"""

# Parse the text into a dictionary
result = ast.literal_eval(PARSE_TEXT)
print(result)


# Collect num of blobs to plot a heatmap
num_blobs = []
x = []
y = []

for plate in result["PlatesInfo"]["seq"]:
    num_blobs.append(plate["num_blobs"])
    x.append(plate["coord"]["x"])
    y.append(plate["coord"]["y"])


# Plot the point coordinates and the number of blobs as tower height in 2d with number of blobs as color
plt.figure()
# Plot the x and y coordinates
plt.plot(0, 0, "*")
# Plot quadrants
plt.xlim(-5, 5)
plt.ylim(-5, 5)
plt.plot([-5, 5], [0, 0], "k-")
plt.plot([0, 0], [-5, 5], "k-")

plt.scatter(x, y, c=num_blobs)
plt.colorbar()
plt.show()
